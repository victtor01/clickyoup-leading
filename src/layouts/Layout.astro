---
import Header from "../components/header/Header.astro";

// src/layouts/Layout.astro
// Este é o "molde" mestre para todas as suas páginas.

// Propriedades que a página pode passar, como o título
interface Props {
  title?: string;
  description?: string;
}
const {
  title = "ClickCut - Gestão e Agendamentos para o seu Negócio",
  description = "A plataforma completa para agendamentos, gestão de equipe e controle financeiro.",
} = Astro.props;
---

<!doctype html>
<html lang="pt-br" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

    <!-- Script para Modo Escuro (Dark Mode) -->
    <script>
      if (
        localStorage.theme === "dark" ||
        (!("theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }
    </script>

    <!-- Fontes do Google (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- ✨ ICONES (MATERIAL SYMBOLS) - ADICIONADO ✨ -->
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
      rel="stylesheet"
    />
  </head>
  <body
    class="bg-white overflow-y-auto overflow-x-hidden dark:bg-zinc-950 text-zinc-800 dark:text-zinc-200 font-sans antialiased"
  >
    <Header />
    <slot />
    <footer></footer>
    <div
      data-js="mobile-menu-panel"
      class="hidden lg:hidden fixed top-16 right-4 z-50 mt-2 w-72 origin-top-right rounded-xl bg-white dark:bg-zinc-900 shadow-lg ring-1 ring-zinc-900/10 dark:ring-white/10"
      role="dialog"
      aria-modal="true"
    >
      <div class="p-4">
        <nav class="flex flex-col space-y-2">
          <a
            href="#features"
            class="block px-3 py-2 rounded-md text-base font-medium text-zinc-700 dark:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-700"
            >Funcionalidades</a
          >
          <a
            href="#waitlist"
            class="block px-3 py-2 rounded-md text-base font-medium text-zinc-700 dark:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-700"
            >Lista de Espera</a
          >
          <hr class="border-zinc-200 dark:border-zinc-700 !my-3" />
          <a
            href="/register"
            class="block px-4 py-3 rounded-lg text-base font-semibold text-white bg-gradient-to-r from-violet-600 to-indigo-600 hover:from-violet-700 hover:to-indigo-700 text-center"
            >Comece Agora (É Grátis)</a
          >
        </nav>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // 1. Encontra o botão
        const menuButton = document.querySelector(
          '[data-js="mobile-menu-button"]'
        );
        // 2. Encontra o painel
        const menuPanel = document.querySelector(
          '[data-js="mobile-menu-panel"]'
        );

        // 3. Se ambos existirem, adiciona a ação de clique
        if (menuButton && menuPanel) {
          menuButton.addEventListener("click", (e) => {
            e.preventDefault();

            // Alterna a classe 'hidden' para mostrar/esconder o menu
            menuPanel.classList.toggle("hidden");

            // Atualiza o aria-expanded
            const isExpanded = !menuPanel.classList.contains("hidden");
            menuButton.setAttribute("aria-expanded", String(isExpanded));

            // Troca os ícones de "hambúrguer" e "X"
            const iconOpen = menuButton.querySelector('[data-js="icon-open"]');
            const iconClose = menuButton.querySelector(
              '[data-js="icon-close"]'
            );

            if (iconOpen && iconClose) {
              iconOpen.classList.toggle("hidden");
              iconClose.classList.toggle("hidden");
            }
          });
        } else {
          // 4. Se não encontrar, avisa no console do navegador
          console.warn(
            'Script do Menu Móvel: Não foi possível encontrar o botão [data-js="mobile-menu-button"] ou o painel [data-js="mobile-menu-panel"]. O clique não vai funcionar.'
          );
        }
      });
    </script>
  </body>
</html>
